# AGENTS.md
<!-- Generated by APM CLI from distributed .apm/ primitives -->
<!-- Build ID: __BUILD_ID__ -->
<!-- APM Version: 0.5.5 -->
<!-- Sources: dependency:danielmeppiel/compliance-rules, dependency:danielmeppiel/design-guidelines, local -->

## Files matching `**/*.md`

<!-- Source: local .github/instructions/docs.instructions.md -->
# Documentation Instructions

## Context
These instructions apply to **Markdown Documentation**.

## Guidelines
1. **Keep it Updated**: Update docs when code changes.
2. **Clear Structure**: Use headers and lists.
3. **Links**: Use relative links to other files.
4. **Code Blocks**: Specify language for syntax highlighting.

## Files matching `**/*.test.ts`

<!-- Source: local .github/instructions/testing.instructions.md -->
# Testing Instructions

## Context
These instructions apply to all **Test Files**.

## Guidelines
1. **AAA Pattern**: Arrange, Act, Assert.
2. **Isolation**: Tests should not depend on each other.
3. **Mocking**:
   - Use `jest.mock()` for external modules.
   - Use dependency injection to pass mock implementations.

## Naming
- `describe('UnitName', ...)`
- `it('should expected behavior', ...)`

## Coverage
- **Domain**: High coverage required.
- **Utils**: High coverage required.
- **UI**: Focus on user interactions and state updates.

## Files matching `**/*.tsx`

<!-- Source: local .github/instructions/react.instructions.md -->
# React & UI Instructions

## Context
These instructions apply to **React Components** and **Views** (`.tsx` files).

## Architecture
- **Views**: Located in `src/features/{feature}/views/`.
- **Components**: Shared UI in `src/lib/components/`.
- **Pattern**: **MVI (Model-View-Intent)**.
  - Views receive `state` and `dispatch` from an Interactor hook.
  - Views **never** contain business logic.
  - Views **only** dispatch actions (Intents).

## Styling CSS)
- Use **CSS** utility classes.
- **Example**:
  ```tsx
  <Text style={{ padding: Theme.spacing(4), backgroundColor: Theme.colors.gray[100] }}>
    Hello World
  </Text>
  ```

## Testing
- Use **React Testing Library**.
- Test that user interactions dispatch the correct actions.

## Files matching `**/*.{jsx,tsx,vue,html,css,scss,sass,less}`

<!-- Source: dependency:danielmeppiel/design-guidelines apm_modules/danielmeppiel/design-guidelines/.apm/instructions/design-standards.instructions.md -->
# Design System & Accessibility Standards

## Color & Contrast Standards

### Corporate Brand Colors
- **Primary Accent**: Dark green (`#059669` or similar dark green shades)
- **Background**: White (`#ffffff`)
- **Note**: All corporate branding must use dark green accents with white backgrounds

### Color Palette
- **Primary**: Use high-contrast colors that meet WCAG AA standards (4.5:1 minimum)
- **Secondary**: Ensure color combinations work for colorblind users
- **Status Colors**: Use consistent semantic colors across the application
  - Success: #28a745 (green)
  - Warning: #ffc107 (amber)
  - Error: #dc3545 (red)
  - Info: #17a2b8 (blue)

### Accessibility Requirements
- All interactive elements must have focus indicators
- Color should never be the only means of conveying information
- Text must maintain minimum contrast ratios
- Images must include appropriate alt text

## Typography Standards

### Font Hierarchy
- **Headings**: Use semantic HTML headings (h1-h6) in logical order
- **Body Text**: Minimum 16px font size for accessibility
- **Line Height**: 1.5x font size minimum for readability
- **Font Weights**: Use consistent weight scale (400, 600, 700)

### Responsive Typography
```css
/* Example responsive font scale */
h1 { font-size: clamp(1.75rem, 4vw, 3rem); }
h2 { font-size: clamp(1.5rem, 3.5vw, 2.5rem); }
body { font-size: clamp(1rem, 2.5vw, 1.125rem); }
```

## Layout & Spacing

### Grid System
- Use CSS Grid or Flexbox for layouts
- Maintain consistent spacing scale (8px base unit)
- Ensure responsive breakpoints at: 480px, 768px, 1024px, 1440px

### Component Standards
- **Buttons**: Minimum 44px touch target size
- **Form Fields**: Clear labels and error states
- **Navigation**: Keyboard accessible with proper ARIA labels
- **Cards**: Consistent padding and border radius

## Mobile-First Design

### Touch Targets
- Minimum 44x44px for touch elements
- Adequate spacing between interactive elements
- Consider thumb reach zones in mobile layouts

### Performance
- Optimize images with appropriate formats (WebP, AVIF)
- Use lazy loading for below-the-fold content
- Minimize layout shifts (CLS)

## Component Checklist

### Before Implementation
- [ ] Meets WCAG 2.1 AA accessibility standards
- [ ] Works with keyboard navigation only
- [ ] Compatible with screen readers
- [ ] Tested across major browsers
- [ ] Responsive across all breakpoints
- [ ] Consistent with design system tokens

### Testing Requirements
- [ ] Color contrast verification
- [ ] Screen reader testing
- [ ] Keyboard navigation testing
- [ ] Mobile device testing
- [ ] Cross-browser compatibility check

**Remember**: Design impacts all users. Always consider accessibility and inclusive design principles from the start of development.

## Files matching `**/*.{py,js,ts,tsx,java,cpp,c,h,hpp,cs,php,rb,go,rs,swift,kt}`

<!-- Source: dependency:danielmeppiel/compliance-rules apm_modules/danielmeppiel/compliance-rules/.apm/instructions/compliance.instructions.md -->
# Data Privacy & Compliance Standards

## GDPR Compliance Requirements

### Personal Data Handling
- **Data Minimization**: Only collect and process personal data that is necessary for specific, explicit, and legitimate purposes
- **Consent Management**: Implement clear consent mechanisms with opt-in/opt-out functionality
- **Right to Erasure**: Provide mechanisms for data deletion upon user request
- **Data Portability**: Enable users to export their data in machine-readable formats

### Code Implementation Standards
- Use encryption for all personal data storage (AES-256 minimum)
- Implement secure authentication with multi-factor authentication
- Log all data access events with timestamps and user identification
- Never store sensitive data in plain text or logs

## Legal Review Checklist

### Before Code Deployment
- [ ] No hardcoded credentials or API keys
- [ ] All user inputs are validated and sanitized
- [ ] Error messages don't leak sensitive information
- [ ] Third-party dependencies are approved and up-to-date
- [ ] Data retention policies are implemented

### AI/ML Specific Requirements
- [ ] Model bias testing completed
- [ ] Training data provenance documented
- [ ] Model interpretability measures in place
- [ ] Algorithmic impact assessment conducted

## Audit Trail Requirements

### Mandatory Logging
- Authentication attempts (successful and failed)
- Data access patterns and queries
- Configuration changes
- Administrative actions
- Model training and deployment events

### Log Retention
- Security logs: 7 years minimum
- Audit logs: 5 years minimum
- Performance logs: 1 year minimum

**Remember**: When in doubt about compliance requirements, consult the Legal & Compliance team before proceeding.

## Files matching `**/*Interactor.ts`

<!-- Source: local .github/instructions/interactors.instructions.md -->
# Interactor Instructions

## Context
These instructions apply to **Interactors** which contain the business logic for features.

## MVI Pattern
- **State**: Managed by a Zustand store.
- **Reducer**: Pure function for synchronous updates.
- **Inducer**: Method for async side effects.
- **Observe**: Method for observables built from store.

## Rules
1. **Extend Base**: Must extend `Interactor<State, Action>`.
2. **Dependency Injection**: Dependencies (Use Cases, Repositories) must be injected via constructor.
3. **Pure Logic**: Keep logic out of the View, only used dispatching actions.
4. **Strict Types**: Define explicit `State` and `Action` types.

## Example
```typescript
class GameInteractor extends Interactor<GameState, GameAction> {
  constructor(
    private readonly useCase: GetGameUseCase,
    store: StoreApi<GameState>
  ) {
    super(store, gameReducer);
  }

  protected async inducer(state: GameState, action: GameAction): Promise<void> {
    if (action.type === 'START') {
      await this.useCase.execute();
      this.dispatch({ type: 'STARTED' });
    }
  }
}
```

## Files matching `src/lib/data/**/*.ts`

<!-- Source: local .github/instructions/data.instructions.md -->
# Data Layer Instructions

## Context
These instructions apply to **Repositories** and **Data Sources**.

## Rules
1. **Implement Interfaces**: Repositories must implement interfaces defined in the Domain layer.
2. **Data Mapping**: Convert Database Models (Prisma) to Domain Entities. Never leak Prisma types to the Domain.
3. **Error Handling**: Catch database errors and throw Domain Errors.
4. **Data Sources**: bring in data sources from the Infrastructure layer.

## Testing
- **Integration Tests**: Test against a real (or seeded) database to ensure queries work.

## Files matching `src/lib/domain/**/*.ts`

<!-- Source: local .github/instructions/domain.instructions.md -->
# Domain Layer Instructions

## Context
These instructions apply to **Domain Entities**, **Use Cases**, and **Repository Interfaces**.

## Rules
1. **No Dependencies**: The Domain layer must NOT depend on Data, Infrastructure, or Presentation layers.
2. **Pure TypeScript**: Use plain classes and interfaces. No framework-specific code (e.g., no React, no Prisma imports).
3. **Use Cases**:
   - Implement `IUseCase<Input, Output>`.
   - Single responsibility (one business action per class).
4. **Entities**:
   - Define the core data structures of the application.
   - Include validation logic if necessary.

## Testing
- **Unit Tests**: This layer must have 100% unit test coverage.
- **Mocking**: Mock repository interfaces when testing Use Cases.

---
*This file was generated by APM CLI. Do not edit manually.*
*To regenerate: `specify apm compile`*
